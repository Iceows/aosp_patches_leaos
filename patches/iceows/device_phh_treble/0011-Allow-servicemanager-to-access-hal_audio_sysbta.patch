From b36fbac0aab80a3327a7fc12e7e22d2f316cbf62 Mon Sep 17 00:00:00 2001
From: Raphael Mounier <mounierr07@gmail.com>
Date: Wed, 21 Dec 2022 09:16:06 +0100
Subject: [PATCH 2/2] Allow servicemanager to access hal_audio_sysbta

Allow servicemanager to access hal_audio_sysbta
---
 sepolicy/hal_audio_sysbta.te | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/sepolicy/hal_audio_sysbta.te b/sepolicy/hal_audio_sysbta.te
index 8f24507..3b40768 100644
--- a/sepolicy/hal_audio_sysbta.te
+++ b/sepolicy/hal_audio_sysbta.te
@@ -9,5 +9,9 @@ hal_client_domain(hal_audio_sysbta, hal_allocator)
 # allow audioserver to call hal_audio dump with its own fd to retrieve status
 allow hal_audio_sysbta audioserver:fifo_file write;
 
-get_prop(hal_audio_sysbta, vendor_default_prop)
+# Allow servicemanager to access hal_audio_sysbta
+allow servicemanager hal_audio_sysbta:dir { search };
+allow servicemanager hal_audio_sysbta:file { open read };
+allow servicemanager hal_audio_sysbta:process { getattr };
 
+get_prop(hal_audio_sysbta, vendor_default_prop)
-- 
2.25.1

